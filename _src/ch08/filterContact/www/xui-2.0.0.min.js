(function(){var undefined,xui,window=this,string=new String("string"),document=window.document,simpleExpr=/^#?([\w-]+)$/,idExpr=/^#/,tagExpr=/<([\w:]+)/,slice=function(e){return[].slice.call(e,0)};try{var a=slice(document.documentElement.childNodes)[0].nodeType}catch(e){slice=function(e){var ret=[];for(var i=0;e[i];i++){ret.push(e[i])}return ret}}window.x$=window.xui=xui=function(q,context){return new xui.fn.find(q,context)};if(![].forEach){Array.prototype.forEach=function(fn){var len=this.length||0,i=0,that=arguments[1];if(typeof fn=="function"){for(;i<len;i++){fn.call(that,this[i],i,this)}}}}function removex(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;return array.push.apply(array,rest)}xui.fn=xui.prototype={extend:function(o){for(var i in o){xui.fn[i]=o[i]}},find:function(q,context){var ele=[],tempNode;if(!q){return this}else{if(context==undefined&&this.length){ele=this.each(function(el){ele=ele.concat(slice(xui(q,el)))}).reduce(ele)}else{context=context||document;if(typeof q==string){if(simpleExpr.test(q)&&context.getElementById&&context.getElementsByTagName){ele=idExpr.test(q)?[context.getElementById(q.substr(1))]:context.getElementsByTagName(q);if(ele[0]==null){ele=[]}}else{if(tagExpr.test(q)){tempNode=document.createElement("i");tempNode.innerHTML=q;slice(tempNode.childNodes).forEach(function(el){ele.push(el)})}else{if(window.Sizzle!==undefined){ele=Sizzle(q,context)}else{ele=context.querySelectorAll(q)}}}ele=slice(ele)}else{if(q instanceof Array){ele=q}else{if(q.toString()=="[object NodeList]"){ele=slice(q)}else{if(q.nodeName||q===window){ele=[q]}}}}}}return this.set(ele)},set:function(elements){var ret=xui();ret.cache=slice(this.length?this:[]);ret.length=0;[].push.apply(ret,elements);return ret},reduce:function(elements,b){var a=[],elements=elements||slice(this);elements.forEach(function(el){if(a.indexOf(el,0,b)<0){a.push(el)}});return a},has:function(q){var list=xui(q);return this.filter(function(){var that=this;var found=null;list.each(function(el){found=(found||el==that)});return found})},filter:function(fn){var elements=[];return this.each(function(el,i){if(fn.call(el,i)){elements.push(el)}}).set(elements)},not:function(q){var list=slice(this);return this.filter(function(i){var found;xui(q).each(function(el){return found=list[i]!=el});return found})},each:function(fn){for(var i=0,len=this.length;i<len;++i){if(fn.call(this[i],this[i],i,this)===false){break}}return this}};xui.fn.find.prototype=xui.fn;xui.extend=xui.fn.extend;xui.extend({html:function(location,html){clean(this);if(arguments.length==0){return this[0].innerHTML}if(arguments.length==1&&arguments[0]!="remove"){html=location;location="inner"}if(html.each!==undefined){var that=this;html.each(function(el){that.html(location,el)});return this}return this.each(function(el){var parent,list,len,i=0;if(location=="inner"){if(typeof html==string||typeof html=="number"){el.innerHTML=html;list=el.getElementsByTagName("SCRIPT");len=list.length;for(;i<len;i++){eval(list[i].text)}}else{el.innerHTML="";el.appendChild(html)}}else{if(location=="outer"){el.parentNode.replaceChild(wrapHelper(html,el),el)}else{if(location=="top"){el.insertBefore(wrapHelper(html,el),el.firstChild)}else{if(location=="bottom"){el.insertBefore(wrapHelper(html,el),null)}else{if(location=="remove"){el.parentNode.removeChild(el)}else{if(location=="before"){el.parentNode.insertBefore(wrapHelper(html,el.parentNode),el)}else{if(location=="after"){el.parentNode.insertBefore(wrapHelper(html,el.parentNode),el.nextSibling)}}}}}}}})},attr:function(attribute,val){if(arguments.length==2){return this.each(function(el){(attribute=="checked"&&(val==""||val==false||typeof val=="undefined"))?el.removeAttribute(attribute):el.setAttribute(attribute,val)})}else{var attrs=[];this.each(function(el){var val=el.getAttribute(attribute);if(val!=null){attrs.push(val)}});return attrs}}});"inner outer top bottom remove before after".split(" ").forEach(function(method){xui.fn[method]=function(where){return function(html){return this.html(where,html)}}(method)});function getTag(el){return(el.firstChild===null)?{UL:"LI",DL:"DT",TR:"TD"}[el.tagName]||el.tagName:el.firstChild.tagName}function wrapHelper(html,el){return(typeof html==string)?wrap(html,getTag(el)):html}function wrap(xhtml,tag){var attributes={},re=/^<([A-Z][A-Z0-9]*)([^>]*)>([\s\S]*)<\/\1>/i,element,x,a,i=0,attr,node,attrList,result;if(re.test(xhtml)){result=re.exec(xhtml);tag=result[1];if(result[2]!==""){attrList=result[2].split(/([A-Z]*\s*=\s*['|"][A-Z0-9:;#\s]*['|"])/i);for(;i<attrList.length;i++){attr=attrList[i].replace(/^\s*|\s*$/g,"");if(attr!==""&&attr!==" "){node=attr.split("=");attributes[node[0]]=node[1].replace(/(["']?)/g,"")}}}xhtml=result[3]}element=document.createElement(tag);for(x in attributes){a=document.createAttribute(x);a.nodeValue=attributes[x];element.setAttributeNode(a)}element.innerHTML=xhtml;return element}function clean(collection){var ns=/\S/;collection.each(function(el){var d=el,n=d.firstChild,ni=-1,nx;while(n){nx=n.nextSibling;if(n.nodeType==3&&!ns.test(n.nodeValue)){d.removeChild(n)}else{n.nodeIndex=++ni}n=nx}})}xui.events={};var cache={};xui.extend({on:function(type,fn,details){return this.each(function(el){if(xui.events[type]){var id=_getEventID(el),responders=_getRespondersForEvent(id,type);details=details||{};details.handler=function(event,data){xui.fn.fire.call(xui(this),type,data)};if(!responders.length){xui.events[type].call(el,details)}}el.addEventListener(type,_createResponder(el,type,fn),false)})},un:function(type,fn){return this.each(function(el){var id=_getEventID(el),responders=_getRespondersForEvent(id,type),i=responders.length;while(i--){if(fn===undefined||fn.guid===responders[i].guid){el.removeEventListener(type,responders[i],false);removex(cache[id][type],i,1)}}if(cache[id][type].length===0){delete cache[id][type]}for(var t in cache[id]){return}delete cache[id]})},fire:function(type,data){return this.each(function(el){if(el==document&&!el.dispatchEvent){el=document.documentElement}var event=document.createEvent("HTMLEvents");event.initEvent(type,true,true);event.data=data||{};event.eventName=type;el.dispatchEvent(event)})}});"click load submit touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend orientationchange".split(" ").forEach(function(event){xui.fn[event]=function(action){return function(fn){return fn?this.on(action,fn):this.fire(action)}}(event)});xui(window).on("load",function(){if(!("onorientationchange" in document.body)){(function(){var w=window.innerWidth,h=window.innerHeight;xui(window).on("resize",function(){var portraitSwitch=(window.innerWidth<w&&window.innerHeight>h)&&(window.innerWidth<window.innerHeight),landscapeSwitch=(window.innerWidth>w&&window.innerHeight<h)&&(window.innerWidth>window.innerHeight);if(portraitSwitch||landscapeSwitch){window.orientation=portraitSwitch?0:90;xui("body").fire("orientationchange");w=window.innerWidth;h=window.innerHeight}})})()}});xui.touch=(function(){try{return !!(document.createEvent("TouchEvent").initTouchEvent)}catch(e){return false}})();function _getEventID(element){if(element._xuiEventID){return element._xuiEventID}return element._xuiEventID=++_getEventID.id}_getEventID.id=1;function _getRespondersForEvent(id,eventName){var c=cache[id]=cache[id]||{};return c[eventName]=c[eventName]||[]}function _createResponder(element,eventName,handler){var id=_getEventID(element),r=_getRespondersForEvent(id,eventName);var responder=function(event){if(handler.call(element,event)===false){event.preventDefault();event.stopPropagation()}};responder.guid=handler.guid=handler.guid||++_getEventID.id;responder.handler=handler;r.push(responder);return responder}xui.extend({tween:function(props,callback){var emileOpts=function(o){var options={};"duration after easing".split(" ").forEach(function(p){if(props[p]){options[p]=props[p];delete props[p]}});return options};var serialize=function(props){var serialisedProps=[],key;if(typeof props!=string){for(key in props){serialisedProps.push(key+":"+props[key])}serialisedProps=serialisedProps.join(";")}else{serialisedProps=props}return serialisedProps};if(props instanceof Array){props.forEach(function(a){})}var opts=emileOpts(props);var prop=serialize(props);return this.each(function(e){emile(e,prop,opts,callback)})}});function hasClass(el,className){return getClassRegEx(className).test(el.className)}var rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;function trim(text){return(text||"").replace(rtrim,"")}xui.extend({setStyle:function(prop,val){prop=prop.replace(/\-[a-z]/g,function(m){return m[1].toUpperCase()});return this.each(function(el){el.style[prop]=val})},getStyle:function(prop,callback){var s=function(el,p){return document.defaultView.getComputedStyle(el,"").getPropertyValue(p.replace(/[A-Z]/g,function(m){return"-"+m.toLowerCase()}))};return(callback===undefined)?s(this[0],prop):this.each(function(el){callback(s(el,prop))})},addClass:function(className){return this.each(function(el){if(hasClass(el,className)===false){el.className=trim(el.className+" "+className)}})},hasClass:function(className,callback){var self=this;return this.length&&(function(){var hasIt=false;self.each(function(el){if(hasClass(el,className)){hasIt=true;if(callback){callback(el)}}});return hasIt})()},removeClass:function(className){if(className===undefined){this.each(function(el){el.className=""})}else{var re=getClassRegEx(className);this.each(function(el){el.className=trim(el.className.replace(re,"$1"))})}return this},css:function(o){for(var prop in o){this.setStyle(prop,o[prop])}return this}});var reClassNameCache={},getClassRegEx=function(className){var re=reClassNameCache[className];if(!re){re=new RegExp("(^|\\s+)"+className+"(?:\\s+|$)");reClassNameCache[className]=re}return re};xui.extend({xhr:function(location,url,options){if(!/^(inner|outer|top|bottom|before|after)$/.test(location)){options=url;url=location;location="inner"}var o=options?options:{};if(typeof options=="function"){o={};o.callback=options}var that=this,req=new XMLHttpRequest(),method=o.method||"get",async=o.async||false,params=o.data||null,i=0;req.queryString=params;req.open(method,url,async);if(o.headers){for(;i<o.headers.length;i++){req.setRequestHeader(o.headers[i].name,o.headers[i].value)}}req.handleResp=(o.callback!=null)?o.callback:function(){that.html(location,this.responseText)};req.handleError=(o.error&&typeof o.error=="function")?o.error:function(){};function hdl(){if(req.readyState==4){delete (that.xmlHttpRequest);if(req.status===0||req.status==200){req.handleResp()}if((/^[45]/).test(req.status)){req.handleError()}}}if(async){req.onreadystatechange=hdl;this.xmlHttpRequest=req}req.send(params);if(!async){hdl()}return this}});(function(emile,container){var parseEl=document.createElement("div"),props=("backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex").split(" ");function interpolate(source,target,pos){return(source+(target-source)*pos).toFixed(3)}function s(str,p,c){return str.substr(p,c||1)}function color(source,target,pos){var i=2,j,c,tmp,v=[],r=[];while(j=3,c=arguments[i-1],i--){if(s(c,0)=="r"){c=c.match(/\d+/g);while(j--){v.push(~~c[j])}}else{if(c.length==4){c="#"+s(c,1)+s(c,1)+s(c,2)+s(c,2)+s(c,3)+s(c,3)}while(j--){v.push(parseInt(s(c,1+j*2,2),16))}}}while(j--){tmp=~~(v[j+3]+(v[j]-v[j+3])*pos);r.push(tmp<0?0:tmp>255?255:tmp)}return"rgb("+r.join(",")+")"}function parse(prop){var p=parseFloat(prop),q=prop.replace(/^[\-\d\.]+/,"");return isNaN(p)?{v:q,f:color,u:""}:{v:p,f:interpolate,u:q}}function normalize(style){var css,rules={},i=props.length,v;parseEl.innerHTML='<div style="'+style+'"></div>';css=parseEl.childNodes[0].style;while(i--){if(v=css[props[i]]){rules[props[i]]=parse(v)}}return rules}container[emile]=function(el,style,opts,after){el=typeof el=="string"?document.getElementById(el):el;opts=opts||{};var target=normalize(style),comp=el.currentStyle?el.currentStyle:getComputedStyle(el,null),prop,current={},start=+new Date,dur=opts.duration||200,finish=start+dur,interval,easing=opts.easing||function(pos){return(-Math.cos(pos*Math.PI)/2)+0.5};for(prop in target){current[prop]=parse(comp[prop])}interval=setInterval(function(){var time=+new Date,pos=time>finish?1:(time-start)/dur;for(prop in target){el.style[prop]=target[prop].f(current[prop].v,target[prop].v,easing(pos))+target[prop].u}if(time>finish){clearInterval(interval);opts.after&&opts.after();after&&setTimeout(after,1)}},10)}})("emile",this)})();